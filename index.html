<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menu Display System</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; 
            background: #f0f2f5; 
            padding: 15px; 
        }
        
        .header {
            background: white;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 16px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .title {
            font-size: 20px;
            font-weight: 600;
            color: #333;
            margin-bottom: 12px;
        }
        
        .controls {
            margin: 12px 0;
            display: flex;
            gap: 8px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .btn {
            background: linear-gradient(135deg, #4a90e2, #357abd);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: transform 0.2s;
            text-decoration: none;
            display: inline-block;
        }
        
        .btn:hover { transform: translateY(-2px); }
        .btn:disabled { background: #6c757d; cursor: not-allowed; transform: none; }
        .btn.refresh { background: linear-gradient(135deg, #28a745, #20c997); }
        .btn.compress { background: linear-gradient(135deg, #ff6b6b, #ee5a52); }
        
        .status {
            color: #666;
            font-size: 12px;
            margin-top: 8px;
        }
        
        .file-size-warning {
            background: #fff3cd;
            border: 1px solid #ffeeba;
            color: #856404;
            padding: 8px 12px;
            border-radius: 6px;
            margin: 8px 0;
            font-size: 12px;
            font-weight: 500;
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(175px, 1fr));
            gap: 12px;
            max-width: 1400px;
        }
        
        .menu-card {
            background: #4a90e2;
            color: white;
            border-radius: 8px;
            padding: 0;
            text-align: center;
            position: relative;
            min-height: 140px;
            display: flex;
            flex-direction: column;
            cursor: pointer;
            transition: transform 0.2s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .menu-card:hover { transform: translateY(-4px); }
        .menu-card.monitors-1 { background: linear-gradient(135deg, #4a90e2, #357abd); }
        .menu-card.monitors-2 { background: linear-gradient(135deg, #7b68ee, #6a4fd8); }
        .menu-card.monitors-vertical { background: linear-gradient(135deg, #ff9500, #ff7b00); }
        .menu-card.selected { ring: 3px solid #007bff; transform: scale(1.05); }
        
        .video-thumbnail {
            width: 100%;
            height: 85px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            position: relative;
            overflow: hidden;
        }
        
        /* Vertical monitor thumbnails - portrait crop within same frame */
        .menu-card.monitors-vertical .video-thumbnail {
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .menu-card.monitors-vertical .video-thumbnail video {
            width: auto;
            height: 120%;
            object-fit: cover;
            object-position: center;
        }
        
        .video-thumbnail video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .video-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .video-thumbnail:hover .video-overlay { opacity: 1; }
        
        .thumbnail-play-icon {
            width: 32px;
            height: 32px;
            background: rgba(255,255,255,0.9);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 13px;
            color: #333;
        }
        
        .video-content {
            padding: 10px;
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        
        .menu-name {
            font-weight: 600;
            font-size: 13px;
            margin-bottom: 5px;
            word-break: break-word;
        }
        
        .menu-info {
            font-size: 10px;
            opacity: 0.9;
            background: rgba(255,255,255,0.2);
            padding: 3px 6px;
            border-radius: 10px;
            display: inline-block;
        }
        
        .delete-btn {
            position: absolute;
            top: 5px;
            left: 5px;
            background: rgba(255, 59, 48, 0.9);
            color: white;
            border: none;
            padding: 3px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 9px;
            width: 20px;
            height: 20px;
        }
        
        .folder-badge {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(255,255,255,0.3);
            padding: 2px 5px;
            border-radius: 6px;
            font-size: 8px;
            font-weight: 500;
        }
        
        .select-indicator {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,123,255,0.95);
            color: white;
            padding: 6px 10px;
            border-radius: 15px;
            font-size: 11px;
            font-weight: bold;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 10;
        }
        
        .menu-card.selected .select-indicator { opacity: 1; }
        
        .folder-section {
            margin-bottom: 24px;
        }
        
        .folder-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 16px;
            color: #333;
            padding: 8px 0;
            border-bottom: 2px solid #eee;
        }
        
        .loading {
            text-align: center;
            color: #666;
            font-size: 16px;
            padding: 40px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .spinner {
            width: 35px;
            height: 35px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #4a90e2;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 16px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .error {
            background: #ff6b6b;
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            text-align: center;
        }
        
        .fullscreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: 1000;
            display: none;
            align-items: center;
            justify-content: center;
        }
        
        .fullscreen.show { display: flex; }
        
        .fullscreen video {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        
        .close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.9);
            border: none;
            padding: 15px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
            width: 50px;
            height: 50px;
        }
        
        .upload-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 2000;
            display: none;
            align-items: center;
            justify-content: center;
        }
        
        .upload-overlay.show { display: flex; }
        
        .upload-modal {
            background: white;
            padding: 30px;
            border-radius: 12px;
            max-width: 500px;
            width: 90%;
            text-align: center;
        }
        
        .upload-progress { margin: 20px 0; }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #f0f0f0;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #4a90e2, #357abd);
            width: 0%;
            transition: width 0.3s;
        }
        
        .selection-info {
            text-align: center;
            margin: 8px 0;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
            display: none;
            font-size: 12px;
        }

        @media (max-width: 768px) {
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                min-width: 170px;
            }
            
            .grid {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="title"> Menu Display System</div>
        <div class="controls">
            <button class="btn" id="uploadBtn" onclick="triggerFileUpload()" disabled>üì§ Replace Selected</button>
            <input type="file" id="fileInput" accept=".mp4,.mov,.avi" style="display: none;" onchange="handleFileUpload(event)">
            <a href="https://www.freeconvert.com/video-compressor" target="_blank" class="btn compress" title="Compress videos before uploading">üóúÔ∏è Compress Video</a>
            <button class="btn refresh" onclick="loadMenus()">üîÑ Refresh</button>
        </div>
        <div class="file-size-warning">
             <strong>Important:</strong> Please keep MP4 files under 10MB for optimal performance. Use the compress button above if needed.
        </div>
        <div id="selectionInfo" class="selection-info">
            <span id="selectedFileName">No file selected</span>
            <button onclick="clearSelection()" style="margin-left: 10px; background: #dc3545; color: white; border: none; padding: 4px 8px; border-radius: 4px;">Clear</button>
        </div>
        <div class="status" id="status">Click on any video card to select it, then upload a replacement</div>
    </div>

    <div id="content" class="loading">
        <div class="spinner"></div>
        Loading your MP4 files... Click any card to select, then upload a replacement!
    </div>

    <div id="fullscreen" class="fullscreen">
        <video id="fullscreenVideo" controls autoplay></video>
        <button class="close-btn" onclick="closeVideo()">‚úï</button>
    </div>

    <div id="uploadOverlay" class="upload-overlay">
        <div class="upload-modal">
            <h3>üì§ Replace Video File</h3>
            <div style="background: #fff3cd; border: 1px solid #ffeeba; color: #856404; padding: 10px; border-radius: 6px; margin: 15px 0; font-size: 13px;">
                ‚ö†Ô∏è <strong>File Size Limit:</strong> Please ensure your MP4 file is under 10MB for optimal performance.
            </div>
            <div id="replaceInfo" style="margin: 15px 0; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                <p><strong>Replacing:</strong> <span id="originalFileName"></span></p>
                <p><strong>Location:</strong> <span id="originalLocation"></span></p>
                <p><strong>New file:</strong> <span id="newFileName"></span></p>
            </div>
            <div id="uploadProgress" class="upload-progress" style="display: none;">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <p id="uploadStatus">Preparing upload...</p>
            </div>
            <div id="uploadButtons">
                <button class="btn" onclick="startReplacement()">‚úÖ Replace File</button>
                <button class="btn" onclick="closeUploadModal()" style="background: #6c757d;">‚ùå Cancel</button>
            </div>
        </div>
    </div>

    <script>
        const username = 'meama24252525';
        const repoName = '1-monitor-ones';
        const githubToken = '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';  // ‚ö†Ô∏è REPLACE THIS WITH YOUR GITHUB TOKEN
        
        let menus1 = [];
        let menus2 = [];
        let menusVertical = [];
        let selectedFiles = [];
        let selectedFile = null;

        async function loadMenus(repo = repoName) {
            clearSelection();
            
            document.getElementById('status').textContent = 'Scanning "1 monitors", "2 monitors", and "vertical monitors" folders...';
            document.getElementById('content').innerHTML = '<div class="loading"><div class="spinner"></div>Scanning for MP4 files...</div>';
            
            try {
                menus1 = await loadMenusFromFolder('1 monitors', repo);
                
                // For dual monitors, check both menu1 and menu2 subfolders
                const menu2Folder1 = await loadMenusFromFolder('2 monitors/menu1', repo);
                const menu2Folder2 = await loadMenusFromFolder('2 monitors/menu2', repo);
                menus2 = [...menu2Folder1, ...menu2Folder2];
                
                // For vertical monitors, check monitor 1 and monitor 2 subfolders
                const verticalFolder1 = await loadMenusFromFolder('vertical monitors/monitor 1', repo);
                const verticalFolder2 = await loadMenusFromFolder('vertical monitors/monitor 2', repo);
                menusVertical = [...verticalFolder1, ...verticalFolder2];
                
                displayMenus();
                
                const totalMenus = menus1.length + menus2.length + menusVertical.length;
                document.getElementById('status').textContent = `Found ${totalMenus} MP4 files. Click any card to select, then upload a replacement. Keep files under 10MB.`;
                
            } catch (error) {
                document.getElementById('content').innerHTML = `
                    <div class="error">
                        <h3>‚ùå Could not load menus</h3>
                        <p>${error.message}</p>
                        <small>Make sure the repository "${repo}" exists and has the required folders with .mp4 files</small>
                    </div>
                `;
                document.getElementById('status').textContent = 'Error loading menu files';
            }
        }

        async function loadMenusFromFolder(folderName, repo) {
            try {
                const url = `https://api.github.com/repos/${username}/${repo}/contents/${encodeURIComponent(folderName)}`;
                const response = await fetch(url);
                
                if (!response.ok) {
                    return [];
                }
                
                const contents = await response.json();
                
                const mp4Files = contents.filter(item => 
                    item.type === 'file' && 
                    item.name.toLowerCase().endsWith('.mp4')
                ).map(item => ({
                    name: item.name,
                    path: item.path,
                    download_url: item.download_url,
                    size: item.size,
                    sha: item.sha
                }));
                
                return mp4Files;
                
            } catch (error) {
                return [];
            }
        }

        function displayMenus() {
            let html = '';
            
            if (menus1.length > 0) {
                html += `
                    <div class="folder-section">
                        <div class="folder-title"> Single Monitor Menus (${menus1.length})</div>
                        <div class="grid">
                            ${menus1.map((menu, index) => `
                                <div class="menu-card monitors-1" id="card-${menu.path}" onclick="selectFile('${menu.path}', '${menu.name}', '1 monitors')">
                                    <button class="delete-btn" onclick="event.stopPropagation(); deleteFile('${menu.path}', '${menu.sha}', '${menu.name}')" title="Delete file">üóëÔ∏è</button>
                                    <div class="folder-badge">1 Monitor</div>
                                    
                                    <div class="video-thumbnail">
                                        <video preload="metadata" muted>
                                            <source src="${menu.download_url}#t=1" type="video/mp4">
                                        </video>
                                        <div class="video-overlay">
                                            <div class="thumbnail-play-icon" onclick="event.stopPropagation(); playMenu('${menu.download_url}', '${menu.name}')">‚ñ∂Ô∏è</div>
                                        </div>
                                    </div>
                                    
                                    <div class="video-content">
                                        <div class="menu-name">${menu.name}</div>
                                        <div class="menu-info">${(menu.size / (1024*1024)).toFixed(1)} MB</div>
                                    </div>
                                    
                                    <div class="select-indicator">SELECTED</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }
            
            if (menus2.length > 0) {
                html += `
                    <div class="folder-section">
                        <div class="folder-title"> Dual Monitor Menus (${menus2.length})</div>
                        <div class="grid">
                        ${menus2.map((menu, index) => {
                            const folderName = menu.path.includes('/menu1/') ? 'menu1' : 'menu2';
                            return `
                                <div class="menu-card monitors-2" id="card-${menu.path}" onclick="selectFile('${menu.path}', '${menu.name}', '2 monitors/${folderName}')">
                                    <button class="delete-btn" onclick="event.stopPropagation(); deleteFile('${menu.path}', '${menu.sha}', '${menu.name}')" title="Delete file">üóëÔ∏è</button>
                                    <div class="folder-badge">${folderName}</div>
                                    
                                    <div class="video-thumbnail">
                                        <video preload="metadata" muted>
                                            <source src="${menu.download_url}#t=1" type="video/mp4">
                                        </video>
                                        <div class="video-overlay">
                                            <div class="thumbnail-play-icon" onclick="event.stopPropagation(); playMenu('${menu.download_url}', '${menu.name}')">‚ñ∂Ô∏è</div>
                                        </div>
                                    </div>
                                    
                                    <div class="video-content">
                                        <div class="menu-name">${menu.name}</div>
                                        <div class="menu-info">${(menu.size / (1024*1024)).toFixed(1)} MB</div>
                                    </div>
                                    
                                    <div class="select-indicator">SELECTED</div>
                                </div>
                            `;
                        }).join('')}
                        </div>
                    </div>
                `;
            }
            
            if (menusVertical.length > 0) {
                html += `
                    <div class="folder-section">
                        <div class="folder-title"> Vertical Monitor Menus (${menusVertical.length})</div>
                        <div class="grid">
                            ${menusVertical.map((menu, index) => {
                                const monitorNum = menu.path.includes('/monitor 1/') ? 'monitor 1' : 'monitor 2';
                                return `
                                    <div class="menu-card monitors-vertical" id="card-${menu.path}" onclick="selectFile('${menu.path}', '${menu.name}', 'vertical monitors/${monitorNum}')">
                                        <button class="delete-btn" onclick="event.stopPropagation(); deleteFile('${menu.path}', '${menu.sha}', '${menu.name}')" title="Delete file">üóëÔ∏è</button>
                                        <div class="folder-badge">${monitorNum}</div>
                                        
                                        <div class="video-thumbnail">
                                            <video preload="metadata" muted>
                                                <source src="${menu.download_url}#t=1" type="video/mp4">
                                            </video>
                                            <div class="video-overlay">
                                                <div class="thumbnail-play-icon" onclick="event.stopPropagation(); playMenu('${menu.download_url}', '${menu.name}')">‚ñ∂Ô∏è</div>
                                            </div>
                                        </div>
                                        
                                        <div class="video-content">
                                            <div class="menu-name">${menu.name}</div>
                                            <div class="menu-info">${(menu.size / (1024*1024)).toFixed(1)} MB</div>
                                        </div>
                                        
                                        <div class="select-indicator">SELECTED</div>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    </div>
                `;
            }
            
            if (menus1.length === 0 && menus2.length === 0 && menusVertical.length === 0) {
                html = `
                    <div class="loading">
                        <h3>üìÅ No .mp4 files found</h3>
                        <p>Looking for .mp4 files in folders:</p>
                        <p>üìÇ "1 monitors"</p>
                        <p>üìÇ "2 monitors/menu1" and "2 monitors/menu2"</p>
                        <p>üìÇ "vertical monitors/monitor 1" and "vertical monitors/monitor 2"</p>
                        <p>Repository: ${repoName}</p>
                    </div>
                `;
            }
            
            document.getElementById('content').innerHTML = html;
        }

        function selectFile(filePath, fileName, folder) {
            document.querySelectorAll('.menu-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            const cardElement = document.getElementById(`card-${filePath}`);
            if (cardElement) {
                cardElement.classList.add('selected');
            }
            
            selectedFile = {
                path: filePath,
                name: fileName,
                folder: folder
            };
            
            document.getElementById('selectedFileName').textContent = `Selected: ${fileName} (${folder})`;
            document.getElementById('selectionInfo').style.display = 'block';
            document.getElementById('uploadBtn').disabled = false;
        }

        function clearSelection() {
            document.querySelectorAll('.menu-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            selectedFile = null;
            document.getElementById('selectionInfo').style.display = 'none';
            document.getElementById('uploadBtn').disabled = true;
        }

        function triggerFileUpload() {
            if (!selectedFile) {
                alert('Please select a file to replace first');
                return;
            }
            document.getElementById('fileInput').click();
        }

        function handleFileUpload(event) {
            const files = Array.from(event.target.files);
            if (files.length === 0) return;
            
            if (!selectedFile) {
                alert('Please select a file to replace first');
                return;
            }
            
            if (files.length > 1) {
                alert('Please select only one file for replacement');
                return;
            }
            
            const newFile = files[0];
            
            // Check file size (10MB = 10 * 1024 * 1024 bytes)
            const maxSize = 10 * 1024 * 1024;
            if (newFile.size > maxSize) {
                alert(`File size (${(newFile.size / (1024*1024)).toFixed(1)} MB) exceeds the 10MB limit. Please compress your video first using the compress button above.`);
                return;
            }
            
            document.getElementById('originalFileName').textContent = selectedFile.name;
            document.getElementById('originalLocation').textContent = selectedFile.folder;
            document.getElementById('newFileName').textContent = `${newFile.name} (${(newFile.size / (1024*1024)).toFixed(1)} MB)`;
            
            selectedFiles = [newFile];
            document.getElementById('uploadOverlay').classList.add('show');
        }

        function closeUploadModal() {
            document.getElementById('uploadOverlay').classList.remove('show');
            document.getElementById('fileInput').value = '';
            selectedFiles = [];
            resetUploadProgress();
        }

        function resetUploadProgress() {
            document.getElementById('uploadProgress').style.display = 'none';
            document.getElementById('uploadButtons').style.display = 'block';
            document.getElementById('progressFill').style.width = '0%';
        }

        async function startReplacement() {
            if (selectedFiles.length === 0 || !selectedFile) return;
            
            const newFile = selectedFiles[0];
            const progressBar = document.getElementById('progressFill');
            const statusText = document.getElementById('uploadStatus');
            
            document.getElementById('uploadProgress').style.display = 'block';
            document.getElementById('uploadButtons').style.display = 'none';
            
            try {
                statusText.textContent = `Replacing ${selectedFile.name} with ${newFile.name}...`;
                progressBar.style.width = '20%';
                
                const base64Content = await fileToBase64(newFile);
                progressBar.style.width = '60%';
                
                const currentFileInfo = await getCurrentFileInfo(selectedFile.path);
                progressBar.style.width = '80%';
                
                await replaceFileOnGitHub(selectedFile.path, base64Content, newFile.name, currentFileInfo.sha);
                progressBar.style.width = '100%';
                
                statusText.textContent = `‚úÖ Successfully replaced ${selectedFile.name}!`;
                
                setTimeout(() => {
                    closeUploadModal();
                    clearSelection();
                    loadMenus();
                }, 2000);
                
            } catch (error) {
                alert(`Failed to replace file: ${error.message}`);
                resetUploadProgress();
            }
        }

        async function getCurrentFileInfo(filePath) {
            const url = `https://api.github.com/repos/${username}/${repoName}/contents/${filePath}`;
            const response = await fetch(url);
            if (!response.ok) {
                throw new Error(`Could not get file info: ${response.status}`);
            }
            return await response.json();
        }

        async function replaceFileOnGitHub(filePath, base64Content, newFileName, currentSha) {
            const url = `https://api.github.com/repos/${username}/${repoName}/contents/${filePath}`;
            
            const response = await fetch(url, {
                method: 'PUT',
                headers: {
                    'Authorization': `token ${githubToken}`,
                    'Accept': 'application/vnd.github.v3+json',
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    message: `Replace ${filePath.split('/').pop()} with ${newFileName}`,
                    content: base64Content,
                    sha: currentSha
                })
            });
            
            if (!response.ok) {
                const error = await response.json();
                throw new Error(error.message || `Upload failed: ${response.status}`);
            }
        }

        function fileToBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = () => {
                    const base64 = reader.result.split(',')[1];
                    resolve(base64);
                };
                reader.onerror = error => reject(error);
            });
        }

        async function deleteFile(filePath, fileSha, fileName) {
            if (!confirm(`Are you sure you want to delete "${fileName}"?`)) {
                return;
            }
            
            try {
                const url = `https://api.github.com/repos/${username}/${repoName}/contents/${filePath}`;
                
                const response = await fetch(url, {
                    method: 'DELETE',
                    headers: {
                        'Authorization': `token ${githubToken}`,
                        'Accept': 'application/vnd.github.v3+json',
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        message: `Delete ${fileName}`,
                        sha: fileSha
                    })
                });
                
                if (!response.ok) {
                    const error = await response.json();
                    throw new Error(error.message || `Delete failed: ${response.status}`);
                }
                
                loadMenus();
                alert(`‚úÖ Successfully deleted "${fileName}"`);
                
            } catch (error) {
                alert(`‚ùå Failed to delete "${fileName}": ${error.message}`);
            }
        }

        function playMenu(videoUrl, menuName) {
            const video = document.getElementById('fullscreenVideo');
            video.src = videoUrl;
            document.getElementById('fullscreen').classList.add('show');
            video.play();
        }

        function closeVideo() {
            document.getElementById('fullscreen').classList.remove('show');
            document.getElementById('fullscreenVideo').pause();
        }

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeVideo();
                closeUploadModal();
            }
        });

        window.onload = function() {
            loadMenus();
            clearSelection();
        }
    </script>
</body>
</html>
